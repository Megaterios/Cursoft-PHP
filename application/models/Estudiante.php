<?php
/**
 * Created by PhpStorm.
 * User: YeisonVargas
 * Date: 16/05/14
 * Time: 10:23 AM
 */

require_once '/../libs/baseDatos.php';


class Estudiante {

    use baseDatos;


    private $idEstudiante;
    private $idAspirante;
    private $idCurso;
    private $reciboMatricula;
    private $estado;


    function __construct(){

    }

    function crear($reciboMatricula, $estado){

        $this->reciboMatricula = $reciboMatricula;
        $this->estado = $estado;
    }

    /**
     * @param mixed $nombre
     */
    public function setReciboMatricula($reciboMatricula){
        $this->reciboMatricula = $reciboMatricula;
        $this->actualizar('reciboMatricula', $this->reciboMatricula);
    }

    /**
     * @return mixed
     */
    public function getReciboMatricula()
    {
        return $this->reciboMatricula;
    }


    /**
     * @param mixed $nombre
     */
    public function setEstado($estado){
        $this->estado = $estado;
        $this->actualizar('estado', $this->estado);
    }

    /**
     * @return mixed
     */
    public function getEstado()
    {
        return $this->estado;
    }

    /**
     *
     */
    public function getIdEstudiante(){

        return $this->idEstudiante;

    }



    /**
     * @param $nombreAtributo
     * @param unknown $valor
     */
    private function actualizar($nombreAtributo, $valor) {

        $this->$nombreAtributo = $valor;
        $this->peticion = "
					UPDATE Estudiante SET " . $nombreAtributo . " = '$valor'
					WHERE Estudiante.idEstudiante = '$this->idEstudiante'
					";

        $this->ejecutar_peticion_simple();
        //Quitar al pasar a Master
        $this->errores();
    }

    /**
     * @param string $correo
     */
    public function obtenerEstudiante($codigo = '') {

        if($codigo != '') {
            $this->peticion = "
						SELECT Estudiante.*
						FROM Estudiante, Usuario, Aspirante
						WHERE Usuario.codigo = '$codigo' AND Usuario.idUsuario = Aspirante.idUsuario AND
						Aspirante.idAspirante = Estudiante.idAspirante";
            $this->obtener_resultados_consulta();
            //Quitar al pasar a Master
            $this->errores();
        }

        if(count($this->filas) == 1) {
            $este = 'this';
            foreach ($this->filas[0] as $atributo=>$valor) {
                $$este->$atributo = $valor;
            }
        }else {
            $this->inicializar();
        }

    }


























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































} 